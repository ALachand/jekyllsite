---
layout: page
title: Mif02 - TP Remise en route JAVA
permalink: /cours/2016/mif02/tp-java.html
---

<h2>Objectif</h2>
<p>Il vous est demandé de mettre en place quelques classes pour vous remettre en tête les grands
principes de la programmation orientée objet : messages et collaboration entre objets, attributs et méthodes, constructeurs, héritage,
etc. Pour cela, vous manipulerez des poneys qui font la course.</p>

<font color=#ff0000>
<p>Votre travail servira de base aux TPs suivants qui feront l'objet d'une note globale.<br/>
  Le travail peut se faire en monome ou binome.</p>
</font>

<h2>Environnement</h2>

<p>Pour développer en Java durant le TP, vous pouvez choisir d'utiliser :
<ul>
<li>Un environnement de développement intégré (comme Eclipse ou Netbeans) qui permet de compiler, de générer un projet, de débugger et d'exécuter </li>
<li>N'importe quel éditeur de texte avec coloration syntaxique, et effectuer la compilation et l'exécution en ligne de commande (<i>javac</i>, <i>java</i>) </li>
</ul>
</p>


<h2>Travail demandé </h2>

<p>On vous fournit une archive <a href="./poneymon_v0.zip">poneymon_v0.zip</a> (merci à <a href="http://dotsmarc.tumblr.com/">@dotsMarc</a>pour les assets), contenant deux classes :</p>

<ul color=#ff0000>
  <li>Poney : une classe gérant un Poney et ses diverses méthodes (avancer, tourner, ...)</li>
  <li>Field : une classe gérant le terrain de jeu</li>
  <li>App : la principale, qui gère la création de l'application</li>
</ul>
<p>Décompressez l'archive dans un dossier sur votre compte. Explorez le code source. Compilez et lancez le programme principal <i>Poneymon</i>.
</p>

<p>Consultez la documentation de <a href="http://docs.oracle.com/javase/8/docs/api/">Java 8</a> et de <a href="http://www.oracle.com/technetwork/java/javase/overview/javafx-overview-2158620.html"/>Javafx</a> (la bibliothèque graphique utilisée).</p>

<blockquote>
  <p>
    Il est possible qu'Eclipse signale une erreur ou un warning de restriction d'access lors de l'utilisation de javafx.
    Ce problème peut être résolu en <a href="http://stackoverflow.com/questions/22812488/using-javafx-in-jre-8">modifiant les propriétés du projet pour autoriser javafx</a>.
  </p>
</blockquote>

<h3>Amélioration du programme</h3>

<p>Modifiez la classe Poney pour:</p>
<ul>
  <li>que la vitesse du Poney change aléatoirement à chaque tour,</li>
</ul>

<p>Ajoutez quelques méthodes à Poney et Field pour :</p>
<ul>
  <li>qu'une partie consiste en 5 tours de pistes,</li>
  <li>que le jeu annonce le Poney gagnant.</li>
</ul>

<p>Testez.</p>

<h3>Des supers Poneys</h3>
<p>Créez une sous-classe de Poney, appellée PoneyAmeliore, qui a pour caractéristiques : </p>
<ul>
  <li>qu'en cas d'appui sur une touche associée a un Poney ce dernier passe
    en mode NianPoney qui double sa vitesse jusqu'à la fin du tour.
    Voir la <a href="http://docs.oracle.com/javafx/2/events/jfxpub-events.htm">gestion des évènements clavier avec Javafx</a>,
    et leur application dans un jeu <a href="http://gamedevelopment.tutsplus.com/tutorials/introduction-to-javafx-for-game-development--cms-23835">ici (section Handling User Input)</a>,</li>
  <li>qu'en mode NianPoney l'image représentant le Poney soit différente (chargez le gif <code>pony-couleur-rainbow.gif</code> plutôt <code>pony-couleur-running.gif</code>).</li>
</ul>

<p>Réfléchissez maintenant à la dépendance entre vos classe, et à la visibilité (public, private, final, protected) de vos variables et méthodes de classe.</p>

  <!-- <li>De conna&icirc;tre son nom et de pouvoir l'écrire dans la console.
    On devra pouvoir créer un poney en lui donnant un nom.
    Si on ne le fait pas, il aura un nom par défaut de votre choix (pensez aux attributs statiques).</li> -->

<p>On va maintenant permettre aux Poneys de se connaitre.</p>
<ul>
  <li>Faites en sorte que chaque poney connaisse les autres (chaque classe contiendra une liste de références vers d'autres poneys).
  Les méthodes associées devront permettre d'ajouter et d'enlever un poney &agrave; la liste des poneys connues par le poney
appelé.
  </li>
  <li>Ajoutez une méthode permettant à un poney de connaitre la distance &agrave; laquelle il se trouve d'un autre poney
    (l'appel se fera en donnant une référence de poney).
  </li>
  <!-- <li>de tester apr&egrave;s chaque déplacement si elle se trouve pr&egrave;s d'un poney qu'elle conna&icirc;t (par exemple moins
de 15 pixels), et de la saluer par son nom, puis de lui demander de se déplacer (par exemple avancer un peu).
  </li> -->
</ul>

<p>Modifiez le programme principal pour tester cette nouvelle classe. Mettez en place une méthode qui permet ce test (qui
crée plusieurs poneys, les fait se conna&icirc;tre les unes les autres, en g&egrave;re les
déplacements, etc.). Utilisez la touche <i>espace</i> pour lancer le test. </p>


<!--h3>Des poneys qui se passent une balle</h3>

<p>Créez une sous-classe de poney appelée poneyBalle. Celle-ci a pour caractéristique de se dessiner comme un disque. </p>
<p>Créer une classe JeuDeBalle, qui g&egrave;re une partie de balle : plusieurs poneys sont créées, dont une
balle.
un poney joueuse commence avec la balle. Puis toutes les poneys se
déplacent au hasard. Celle qui a la balle la
déplace en
m&ecirc;me temps qu'elle. Si elle se trouve proche d'une autre
poney,
elle lui passe la balle. Testez.</p>-->

<h3>Un peu de stratégie</h3>
<p>Rajoutez un peu de stratégie en ne permettant d'utiliser le mode NianPoney qu'une seule fois (pour un tour de piste sur les cinq).</p>
<p>Faites en sorte que deux Poneys soient contrôlés par des joueurs et les autres soient gérés par une IA simple, décidant quand utiliser le mode NianPoney. Par exemple quand la vitesse est lente, pour ne pas prendre trop de retard, quand la vitesse est rapide pour gagner un maximum d'avance, ou quand la distance aux autres Poneys devient trop grande.</p>


<h3>Prendre de l'avance</h3>
<font color=#ff0000>
<p>Il est fortement recommandé de réaliser cette partie pendant le week-end, si vous n'avez pas eu le temps de la faire pendant le TP.</p>
</font>

<p>Le code actuel mélange données, logique et interface. Commencez à restructurer le projet pour séparer la logique générale de l'application, de l'affichage du jeu, des données, et de la logique de jeu (les stratégies).</p>

<p>Pensez à comment le programme pourrait être généralisé, pour facilement transformer les poneys en voitures, changer le mode d'affichage (par exemple bouger les personnages sur un circuit 2D vu de haut), ajouter de nouvelles stratégies.</p>



<!-- <h3>Bonus : deux équipes</h3>

<p>Vous pouvez maintenant regrouper les poneys par équipes. Créez une classe EquipePoney comportant, entre autres, un nom de joueur et un ensemble de poneys.</p>

<p>Créez une sous-classe de poneyAmelioree appelée poneyEquipe, qui aura comme attribut supplémentaire l'équipe d'appartenance.
Ainsi, un poney doit pourvoir vérifier qu'une autre poney est une coéquipi&egrave;re ou une adversaire.</p>

<p>Le jeu peut &ecirc;tre une simple "passe &agrave; dix"
(faire 10 passes au sein d'une équipe sans se faire prendre la balle).
Donnez un comportement &agrave;
  chaque type de poney (déplacement sans la balle,  déplacement  avec
la balle, passe &agrave; une autre poney de la m&ecirc;me équipe assez proche,
  prise de la balle &agrave; un poney adverse assez proche). Créez une
  classe
  JeuEquipe, qui crée les équipes et
  g&egrave;re le jeu. Testez.</p> -->
